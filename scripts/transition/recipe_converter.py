import numpy as np
import csv

def read_cyclus(cyclus_file):
    recipe = False
    with open(cyclus_file, 'r') as f:
        lines = f.readlines()
    comp_dict = {}
    for indx, line in enumerate(lines):
        print(line)
        if 'name' in line:
            name = find_between(line, '<name>', '</name>')
            comp_dict[name] = {}
        if 'id' in line and 'nuclide' not in line:
            iso = find_between(line, '<id>', '</id>')
            comp = float(find_between(lines[indx+1], '<comp>', '</comp>'))
            comp_dict[name].update({iso: comp})

    # normalize comp_dict
    for key, val in comp_dict.items():
        total = sum(val.values(), 0.0)
        print(total)
        comp_dict[key] = {k: v / total for k,v in val.items()}

    # comp_dict[name of recipe] = {isotope: composition}
    return comp_dict


def write_orion(comp_dict, outputfile):
    isotope_array = [' ', 'H3', 'HE6', 'HE8', 'LI8', 'LI9', 'BE7', 'BE10', 'BE11', 'BE12', 'B12', 'B13',
                     'B14', 'C9', 'C10', 'C11', 'C14', 'C15', 'C16', 'N12', 'N13', 'N16', 'N17', 'N18',
                     'O13', 'O14', 'O15', 'O19', 'O20', 'F18', 'F20', 'F21', 'F22', 'F23', 'NE18',
                     'NE19', 'NE23', 'NE24', 'NE25', 'NA20', 'NA21', 'NA22', 'NA24', 'NA24(1)', 'NA25',
                     'NA26', 'NA27', 'NA28', 'NA29', 'NA33', 'NA34', 'NA35', 'MG21', 'MG22', 'MG23',
                     'MG27', 'MG28', 'MG29', 'MG33', 'AL23', 'AL24', 'AL24(1)', 'AL25', 'AL26', 'AL26(1)',
                     'AL28', 'AL29', 'AL30', 'AL31', 'AL32', 'SI25', 'SI26', 'SI27', 'SI31', 'SI32', 'SI33',
                     'SI34', 'P28', 'P29', 'P30', 'P32', 'P33', 'P34', 'P35', 'P36', 'S29', 'S30', 'S31',
                     'S35', 'S37', 'S38', 'S39', 'CL32', 'CL33', 'CL34', 'CL34(1)', 'CL36', 'CL38',
                     'CL38(1)', 'CL39', 'CL40', 'CL41', 'CL42', 'CL43', 'AR33', 'AR34', 'AR35', 'AR37',
                     'AR39', 'AR41', 'AR42', 'AR43', 'AR44', 'AR45', 'AR46', 'K35', 'K36', 'K37',
                     'K38', 'K38(1)', 'K40', 'K42', 'K43', 'K44', 'K45', 'K46', 'K47', 'K48', 'K49',
                     'K50', 'K51', 'CA36', 'CA37', 'CA38', 'CA39', 'CA41', 'CA45', 'CA47', 'CA49',
                     'CA50', 'CA51', 'SC40', 'SC41', 'SC42', 'SC42(1)', 'SC43', 'SC44', 'SC44(1)',
                     'SC45(1)', 'SC46', 'SC46(1)', 'SC47', 'SC48', 'SC49', 'SC50', 'SC50(1)',
                     'SC51', 'TI41', 'TI42', 'TI43', 'TI44', 'TI45', 'TI51', 'TI52', 'TI53', 'V44',
                     'V45', 'V46', 'V46(1)', 'V47', 'V48', 'V49', 'V50', 'V52', 'V53', 'V54',
                     'V55', 'CR45', 'CR46', 'CR47', 'CR48', 'CR49', 'CR51', 'CR55', 'CR56',
                     'CR57', 'MN49', 'MN50', 'MN50(1)', 'MN51', 'MN52', 'MN52(1)', 'MN53', 'MN54',
                     'MN56', 'MN57', 'MN58', 'MN58(1)', 'MN59', 'MN60', 'FE49', 'FE51', 'FE52',
                     'FE52(1)', 'FE53', 'FE53(1)', 'FE55', 'FE59', 'FE60', 'FE61', 'FE62', 'FE63',
                     'CO53', 'CO53(1)', 'CO54', 'CO54(1)', 'CO55', 'CO56', 'CO57', 'CO58', 'CO58(1)',
                     'CO60', 'CO60(1)', 'CO61', 'CO62', 'CO62(1)', 'CO63', 'CO64', 'CO65', 'CO66', 'NI53',
                     'NI55', 'NI56', 'NI57', 'NI59', 'NI63', 'NI65', 'NI66', 'NI67', 'NI68', 'NI69', 'CU57',
                     'CU58', 'CU59', 'CU60', 'CU61', 'CU62', 'CU64', 'CU66', 'CU67', 'CU68', 'CU68(1)', 'CU69',
                     'CU70', 'CU70(1)', 'CU71', 'CU72', 'CU73', 'CU74', 'CU75', 'CU76', 'CU78', 'ZN57', 'ZN59',
                     'ZN60', 'ZN61', 'ZN62', 'ZN63', 'ZN65', 'ZN69', 'ZN69(1)', 'ZN71', 'ZN71(1)', 'ZN72', 'ZN73',
                     'ZN73(1)', 'ZN74', 'ZN75', 'ZN76', 'ZN77', 'ZN77(1)', 'ZN78', 'ZN79', 'ZN80', 'GA62', 'GA63',
                     'GA64', 'GA65', 'GA66', 'GA67', 'GA68', 'GA70', 'GA72', 'GA72(1)', 'GA73', 'GA74', 'GA74(1)', 'GA75',
                     'GA76', 'GA77', 'GA78', 'GA79', 'GA80', 'GA81', 'GA82', 'GA83', 'GA84', 'GE64', 'GE65', 'GE66', 'GE67',
                     'GE68', 'GE69', 'GE71', 'GE71(1)', 'GE73(1)', 'GE75', 'GE75(1)', 'GE77', 'GE77(1)', 'GE78', 'GE79',
                     'GE79(1)', 'GE80', 'GE81', 'GE81(1)', 'GE82', 'GE83', 'GE84', 'GE85', 'GE86', 'AS66', 'AS67', 'AS68',
                     'AS69', 'AS70', 'AS71', 'AS72', 'AS73', 'AS74', 'AS75(1)', 'AS76', 'AS77', 'AS78', 'AS79', 'AS80', 'AS81',
                     'AS82', 'AS82(1)', 'AS83', 'AS84', 'AS85', 'AS86', 'AS87', 'AS88', 'SE68', 'SE69', 'SE70', 'SE71', 'SE72',
                     'SE73', 'SE73(1)', 'SE75', 'SE77(1)', 'SE79', 'SE79(1)', 'SE81', 'SE81(1)', 'SE82', 'SE83', 'SE83(1)', 'SE84',
                     'SE85', 'SE86', 'SE87', 'SE88', 'SE89', 'SE90', 'SE91', 'SE92', 'BR71', 'BR72', 'BR73', 'BR74', 'BR74(1)',
                     'BR75', 'BR76', 'BR76(1)', 'BR77', 'BR77(1)', 'BR78', 'BR79(1)', 'BR80', 'BR80(1)', 'BR82', 'BR82(1)', 'BR83',
                     'BR84', 'BR84(1)', 'BR85', 'BR86', 'BR87', 'BR88', 'BR89', 'BR90', 'BR91', 'BR92', 'BR93', 'BR94', 'KR71',
                     'KR72', 'KR73', 'KR74', 'KR75', 'KR76', 'KR77', 'KR79', 'KR79(1)', 'KR81', 'KR81(1)', 'KR83(1)', 'KR85',
                     'KR85(1)', 'KR87', 'KR88', 'KR89', 'KR90', 'KR91', 'KR92', 'KR93', 'KR94', 'KR95', 'RB74', 'RB75',
                     'RB76', 'RB77', 'RB78', 'RB78(1)', 'RB79', 'RB80', 'RB81', 'RB81(1)', 'RB82', 'RB82(1)', 'RB83',
                     'RB84', 'RB84(1)', 'RB86', 'RB86(1)', 'RB87', 'RB88', 'RB89', 'RB90', 'RB90(1)', 'RB91', 'RB92',
                     'RB93', 'RB94', 'RB95', 'RB96', 'RB97', 'RB98', 'RB99', 'RB100', 'RB101', 'RB102', 'SR77',
                     'SR79', 'SR80', 'SR81', 'SR82', 'SR83', 'SR83(1)', 'SR85', 'SR85(1)', 'SR87(1)', 'SR89', 'SR90',
                     'SR91', 'SR92', 'SR93', 'SR94', 'SR95', 'SR96', 'SR97', 'SR98', 'SR99', 'SR100', 'SR101', 'SR102',
                     'Y80', 'Y81', 'Y82', 'Y83', 'Y83(1)', 'Y84', 'Y84(1)', 'Y85', 'Y85(1)', 'Y86', 'Y86(1)', 'Y87',
                     'Y87(1)', 'Y88', 'Y89(1)', 'Y90', 'Y90(1)', 'Y91', 'Y91(1)', 'Y92', 'Y93', 'Y93(1)', 'Y94', 'Y95',
                     'Y96', 'Y96(1)', 'Y97', 'Y97(1)', 'Y98', 'Y98(1)', 'Y99', 'Y100', 'Y100(1)', 'Y101', 'Y102', 'Y103',
                     'ZR82', 'ZR83', 'ZR84', 'ZR85', 'ZR85(1)', 'ZR86', 'ZR87', 'ZR87(1)', 'ZR88', 'ZR89', 'ZR89(1)',
                     'ZR90(1)', 'ZR93', 'ZR95', 'ZR97', 'ZR98', 'ZR99', 'ZR100', 'ZR101', 'ZR102', 'ZR103', 'ZR104',
                     'NB84', 'NB86', 'NB87', 'NB87(1)', 'NB88', 'NB88(1)', 'NB89', 'NB89(1)', 'NB90', 'NB90(1)', 'NB91',
                     'NB91(1)', 'NB92', 'NB92(1)', 'NB93(1)', 'NB94', 'NB94(1)', 'NB95', 'NB95(1)', 'NB96', 'NB97',
                     'NB97(1)', 'NB98', 'NB98(1)', 'NB99', 'NB99(1)', 'NB100', 'NB100(1)', 'NB101', 'NB102', 'NB102(1)',
                     'NB103', 'NB104', 'NB104(1)', 'NB105', 'NB106', 'NB107', 'NB108', 'MO87', 'MO88', 'MO90', 'MO91', 'MO91(1)',
                     'MO93', 'MO93(1)', 'MO99', 'MO101', 'MO102', 'MO103', 'MO104', 'MO105', 'MO106', 'MO107', 'MO108', 'MO110',
                     'TC90', 'TC91', 'TC91(1)', 'TC92', 'TC93', 'TC93(1)', 'TC94', 'TC94(1)', 'TC95', 'TC95(1)', 'TC96',
                     'TC96(1)', 'TC97', 'TC97(1)', 'TC98', 'TC99', 'TC99(1)', 'TC100', 'TC101', 'TC102', 'TC102(1)',
                     'TC103', 'TC104', 'TC105', 'TC106', 'TC107', 'TC108', 'TC109', 'TC110', 'TC111', 'TC112', 'RU92',
                     'RU93', 'RU93(1)', 'RU94', 'RU95', 'RU97', 'RU103', 'RU103(1)', 'RU105', 'RU106', 'RU107', 'RU108',
                     'RU109', 'RU109(1)', 'RU110', 'RU111', 'RU112', 'RU113', 'RU114', 'RH94', 'RH94(1)', 'RH95',
                     'RH95(1)', 'RH96', 'RH96(1)', 'RH97', 'RH97(1)', 'RH98', 'RH98(1)', 'RH99', 'RH99(1)', 'RH100',
                     'RH100(1)', 'RH101', 'RH101(1)', 'RH102', 'RH102(1)', 'RH103(1)', 'RH104', 'RH104(1)', 'RH105',
                     'RH105(1)', 'RH106', 'RH106(1)', 'RH107', 'RH108', 'RH108(1)', 'RH109', 'RH110', 'RH110(1)',
                     'RH111', 'RH112', 'RH113', 'RH114', 'RH114(1)', 'RH115', 'RH116', 'RH116(1)', 'RH117', 'RH119',
                     'PD94', 'PD97', 'PD98', 'PD99', 'PD100', 'PD101', 'PD103', 'PD107', 'PD107(1)', 'PD109', 'PD109(1)',
                     'PD111', 'PD111(1)', 'PD112', 'PD113', 'PD113(1)', 'PD114', 'PD115', 'PD116', 'PD117', 'PD118',
                     'PD119', 'PD120', 'PD122', 'AG97', 'AG98', 'AG99', 'AG99(1)', 'AG100', 'AG100(1)', 'AG101', 'AG101(1)',
                     'AG102', 'AG102(1)', 'AG103', 'AG103(1)', 'AG104', 'AG104(1)', 'AG105', 'AG105(1)', 'AG106',
                     'AG106(1)', 'AG107(1)', 'AG108', 'AG108(1)', 'AG109(1)', 'AG110', 'AG110(1)', 'AG111', 'AG111(1)',
                     'AG112', 'AG113', 'AG113(1)', 'AG114', 'AG114(1)', 'AG115', 'AG115(1)', 'AG116', 'AG116(1)',
                     'AG117', 'AG117(1)', 'AG118', 'AG118(1)', 'AG119', 'AG120', 'AG120(1)', 'AG121', 'AG122', 'AG122(1)',
                     'AG123', 'AG124', 'AG125', 'CD99', 'CD100', 'CD101', 'CD102', 'CD103', 'CD104', 'CD105', 'CD107',
                     'CD109', 'CD111(1)', 'CD113', 'CD113(1)', 'CD115', 'CD115(1)', 'CD117', 'CD117(1)', 'CD118', 'CD119',
                     'CD119(1)', 'CD120', 'CD121', 'CD121(1)', 'CD122', 'CD123', 'CD124', 'CD125', 'CD126', 'CD127',
                     'CD128', 'CD130', 'IN102', 'IN103', 'IN104', 'IN105', 'IN105(1)', 'IN106', 'IN106(1)', 'IN107',
                     'IN107(1)', 'IN108', 'IN108(1)', 'IN109', 'IN109(1)', 'IN109(2)', 'IN110', 'IN110(1)', 'IN111',
                     'IN111(1)', 'IN112', 'IN112(1)', 'IN113(1)', 'IN114', 'IN114(1)', 'IN114(2)', 'IN115', 'IN115(1)',
                     'IN116', 'IN116(1)', 'IN116(2)', 'IN117', 'IN117(1)', 'IN118', 'IN118(1)', 'IN118(2)', 'IN119',
                     'IN119(1)', 'IN120', 'IN120(1)', 'IN120(2)', 'IN121', 'IN121(1)', 'IN122', 'IN122(1)', 'IN122(2)',
                     'IN123', 'IN123(1)', 'IN124', 'IN124(1)', 'IN125', 'IN125(1)', 'IN126', 'IN126(1)', 'IN127', 'IN127(1)',
                     'IN128', 'IN128(1)', 'IN129', 'IN129(1)', 'IN130', 'IN130(1)', 'IN130(2)', 'IN131', 'IN131(1)',
                     'IN131(2)', 'IN132', 'IN133', 'SN106', 'SN107', 'SN108', 'SN109', 'SN110', 'SN111', 'SN113', 'SN113(1)',
                     'SN117(1)', 'SN119(1)', 'SN121', 'SN121(1)', 'SN123', 'SN123(1)', 'SN125', 'SN125(1)', 'SN126',
                     'SN127', 'SN127(1)', 'SN128', 'SN128(1)', 'SN129', 'SN129(1)', 'SN130', 'SN130(1)', 'SN131',
                     'SN131(1)', 'SN132', 'SN133', 'SN134', 'SN135', 'SN136', 'SB108', 'SB109', 'SB110', 'SB111',
                     'SB112', 'SB113', 'SB114', 'SB115', 'SB116', 'SB116(1)', 'SB117', 'SB118', 'SB118(1)', 'SB119',
                     'SB120', 'SB120(1)', 'SB122', 'SB122(1)', 'SB124', 'SB124(1)', 'SB124(2)', 'SB125', 'SB126', 'SB126(1)',
                     'SB126(2)', 'SB127', 'SB128', 'SB128(1)', 'SB129', 'SB129(1)', 'SB130', 'SB130(1)', 'SB131', 'SB132',
                     'SB132(1)', 'SB133', 'SB134', 'SB134(1)', 'SB135', 'SB136', 'SB137', 'SB138', 'TE107', 'TE108', 'TE109',
                     'TE110', 'TE112', 'TE113', 'TE114', 'TE115', 'TE115(1)', 'TE116', 'TE117', 'TE117(1)', 'TE118', 'TE119',
                     'TE119(1)', 'TE121', 'TE121(1)', 'TE123', 'TE123(1)', 'TE125(1)', 'TE127', 'TE127(1)', 'TE129', 'TE129(1)',
                     'TE131', 'TE131(1)', 'TE132', 'TE133', 'TE133(1)', 'TE134', 'TE135', 'TE136', 'TE137', 'TE138',
                     'TE139', 'TE140', 'TE141', 'I110', 'I111', 'I112', 'I113', 'I114', 'I115', 'I116', 'I117', 'I118',
                     'I118(1)', 'I119', 'I120', 'I120(1)', 'I121', 'I122', 'I123', 'I124', 'I125', 'I126', 'I128', 'I129',
                     'I130', 'I130(1)', 'I131', 'I132', 'I132(1)', 'I133', 'I133(1)', 'I134', 'I134(1)', 'I135', 'I136',
                     'I136(1)', 'I137', 'I138', 'I139', 'I140', 'I141', 'I142', 'XE110', 'XE111', 'XE112', 'XE113',
                     'XE114', 'XE115', 'XE116', 'XE117', 'XE118', 'XE119', 'XE120', 'XE121', 'XE122', 'XE123', 'XE125',
                     'XE125(1)', 'XE127', 'XE127(1)', 'XE129(1)', 'XE131(1)', 'XE133', 'XE133(1)', 'XE134(1)', 'XE135',
                     'XE135(1)', 'XE137', 'XE138', 'XE139', 'XE140', 'XE141', 'XE142', 'XE143', 'XE144', 'XE145', 'XE147',
                     'CS114', 'CS116', 'CS116(1)', 'CS117', 'CS118', 'CS119', 'CS120', 'CS121', 'CS122', 'CS122(1)', 'CS122(2)',
                     'CS123', 'CS123(1)', 'CS124', 'CS124(1)', 'CS125', 'CS126', 'CS127', 'CS128', 'CS129', 'CS130', 'CS131',
                     'CS132', 'CS134', 'CS134(1)', 'CS135', 'CS135(1)', 'CS136', 'CS136(1)', 'CS137', 'CS138', 'CS138(1)', 'CS139',
                     'CS140', 'CS141', 'CS142', 'CS143', 'CS144', 'CS145', 'CS146', 'CS147', 'CS148', 'BA120', 'BA121', 'BA122',
                     'BA123', 'BA124', 'BA125', 'BA126', 'BA127', 'BA128', 'BA129', 'BA129(1)', 'BA130(1)', 'BA131', 'BA131(1)',
                     'BA133', 'BA133(1)', 'BA135(1)', 'BA136(1)', 'BA137(1)', 'BA139', 'BA140', 'BA141', 'BA142', 'BA143', 'BA144',
                     'BA145', 'BA146', 'BA147', 'BA148', 'BA149', 'LA123', 'LA125', 'LA126', 'LA127', 'LA128', 'LA129', 'LA129(1)',
                     'LA130', 'LA131', 'LA132', 'LA132(1)', 'LA133', 'LA134', 'LA135', 'LA136', 'LA136(1)', 'LA137', 'LA138', 'LA140',
                     'LA141', 'LA142', 'LA143', 'LA144', 'LA145', 'LA146', 'LA146(1)', 'LA147', 'LA148', 'LA149', 'LA150', 'LA151',
                     'CE125', 'CE127', 'CE131', 'CE131(1)', 'CE133', 'CE133(1)', 'CE134', 'CE135', 'CE135(1)', 'CE137', 'CE137(1)',
                     'CE138(1)', 'CE139', 'CE139(1)', 'CE141', 'CE142', 'CE143', 'CE144', 'CE145', 'CE146', 'CE147', 'CE148', 'CE149',
                     'CE150', 'CE151', 'CE152', 'PR133', 'PR134', 'PR134(1)', 'PR135', 'PR136', 'PR137', 'PR138', 'PR138(1)', 'PR139',
                     'PR140', 'PR142', 'PR142(1)', 'PR143', 'PR144', 'PR144(1)', 'PR145', 'PR146', 'PR147', 'PR148', 'PR148(1)', 'PR149',
                     'PR150', 'PR151', 'PR152', 'PR153', 'PR154', 'PR155', 'ND134', 'ND135', 'ND136', 'ND137', 'ND137(1)', 'ND138',
                     'ND139', 'ND139(1)', 'ND140', 'ND141', 'ND141(1)', 'ND144', 'ND147', 'ND149', 'ND151', 'ND152', 'ND153', 'ND154',
                     'ND155', 'ND156', 'PM134', 'PM135', 'PM136', 'PM137', 'PM138', 'PM138(1)', 'PM139', 'PM139(1)', 'PM140', 'PM140(1)',
                     'PM141', 'PM142', 'PM143', 'PM144', 'PM145', 'PM146', 'PM147', 'PM148', 'PM148(1)', 'PM149', 'PM150', 'PM151', 'PM152',
                     'PM152(1)', 'PM152(2)', 'PM153', 'PM154', 'PM154(1)', 'PM155', 'PM156', 'PM157', 'PM158', 'SM136', 'SM138', 'SM139',
                     'SM139(1)', 'SM140', 'SM141', 'SM141(1)', 'SM142', 'SM143', 'SM143(1)', 'SM143(2)', 'SM145', 'SM146', 'SM147', 'SM148',
                     'SM149', 'SM151', 'SM153', 'SM153(1)', 'SM155', 'SM156', 'SM157', 'SM158', 'SM159', 'SM160', 'EU136', 'EU138', 'EU139',
                     'EU140', 'EU140(1)', 'EU141', 'EU141(1)', 'EU142', 'EU142(1)', 'EU143', 'EU144', 'EU145', 'EU146', 'EU147', 'EU148',
                     'EU149', 'EU150', 'EU150(1)', 'EU152', 'EU152(1)', 'EU152(2)', 'EU154', 'EU154(1)', 'EU155',
                     'EU156', 'EU157', 'EU158', 'EU159', 'EU160', 'EU161', 'EU162', 'GD139', 'GD142', 'GD143',
                     'GD143(1)', 'GD144', 'GD145', 'GD145(1)', 'GD146', 'GD147', 'GD148', 'GD149', 'GD150', 'GD151',
                     'GD152', 'GD153', 'GD155(1)', 'GD159', 'GD161', 'GD162', 'GD163', 'GD164', 'TB144', 'TB144(1)',
                     'TB145', 'TB146', 'TB146(1)', 'TB147', 'TB147(1)', 'TB148', 'TB148(1)', 'TB149', 'TB149(1)',
                     'TB150', 'TB150(1)', 'TB151', 'TB151(1)', 'TB152', 'TB152(1)', 'TB153', 'TB154', 'TB154(1)',
                     'TB154(2)', 'TB155', 'TB156', 'TB156(1)', 'TB156(2)', 'TB157', 'TB158', 'TB158(1)', 'TB160',
                     'TB161', 'TB162', 'TB163', 'TB164', 'TB165', 'TB166', 'DY144', 'DY146', 'DY146(1)', 'DY147(1)',
                     'DY148', 'DY149', 'DY150', 'DY151', 'DY152', 'DY153', 'DY154', 'DY155', 'DY157', 'DY157(1)',
                     'DY159', 'DY165', 'DY165(1)', 'DY166', 'DY167', 'DY168', 'DY169', 'DY170', 'HO146', 'HO148',
                     'HO148(1)', 'HO149', 'HO149(1)', 'HO150', 'HO150(1)', 'HO151', 'HO151(1)', 'HO152', 'HO152(1)',
                     'HO153', 'HO153(1)', 'HO154', 'HO154(1)', 'HO155', 'HO156', 'HO157', 'HO158', 'HO158(1)',
                     'HO158(2)', 'HO159', 'HO159(1)', 'HO160(1)', 'HO161', 'HO161(1)', 'HO162', 'HO162(1)', 'HO163',
                     'HO163(1)', 'HO164', 'HO164(1)', 'HO166', 'HO166(1)', 'HO167', 'HO168', 'HO169', 'HO170',
                     'HO170(1)', 'ER148', 'ER149(1)', 'ER150', 'ER151', 'ER151(1)', 'ER152', 'ER153', 'ER154', 'ER155',
                     'ER156', 'ER157', 'ER158', 'ER159', 'ER160', 'ER161', 'ER163', 'ER165', 'ER167(1)', 'ER169',
                     'ER171', 'ER172', 'ER173', 'TM148', 'TM149', 'TM150', 'TM151', 'TM151(1)', 'TM154', 'TM154(1)',
                     'TM155', 'TM156', 'TM156(1)', 'TM157', 'TM158', 'TM159', 'TM160', 'TM160(1)', 'TM161', 'TM162',
                     'TM162(1)', 'TM163', 'TM164', 'TM164(1)', 'TM165', 'TM166', 'TM167', 'TM168', 'TM170', 'TM171',
                     'TM172', 'TM173', 'TM174', 'TM175', 'TM176', 'YB151', 'YB153', 'YB154', 'YB155', 'YB156', 'YB157',
                     'YB158', 'YB159', 'YB160', 'YB161', 'YB162', 'YB163', 'YB164', 'YB165', 'YB166', 'YB167', 'YB169',
                     'YB169(1)', 'YB175', 'YB176(1)', 'YB177', 'YB177(1)', 'YB178', 'YB179', 'LU154', 'LU155', 'LU155(1)',
                     'LU156', 'LU156(1)', 'LU157', 'LU158', 'LU159', 'LU160', 'LU161', 'LU161(1)', 'LU162', 'LU163', 'LU164',
                     'LU165', 'LU166', 'LU166(1)', 'LU166(2)', 'LU167', 'LU168', 'LU168(1)', 'LU169', 'LU169(1)', 'LU170',
                     'LU170(1)', 'LU171', 'LU171(1)', 'LU172', 'LU172(1)', 'LU173', 'LU174', 'LU174(1)', 'LU176', 'LU176(1)',
                     'LU177', 'LU177(1)', 'LU178', 'LU178(1)', 'LU179', 'LU180', 'LU181', 'LU182', 'LU183', 'HF155', 'HF156',
                     'HF157', 'HF158', 'HF159', 'HF160', 'HF161', 'HF162', 'HF163', 'HF164', 'HF165', 'HF166', 'HF167',
                     'HF169', 'HF170', 'HF171', 'HF172', 'HF173', 'HF174', 'HF175', 'HF177(1)', 'HF177(2)', 'HF178(1)',
                     'HF178(2)', 'HF179(1)', 'HF179(2)', 'HF180(1)', 'HF181', 'HF182', 'HF182(1)', 'HF183', 'HF184',
                     'TA157', 'TA158', 'TA159', 'TA161', 'TA162', 'TA163', 'TA164', 'TA165', 'TA166', 'TA169', 'TA170',
                     'TA171', 'TA172', 'TA173', 'TA174', 'TA175', 'TA176', 'TA177', 'TA178', 'TA178(1)', 'TA179', 'TA180',
                     'TA182', 'TA182(1)', 'TA182(2)', 'TA183', 'TA184', 'TA185', 'TA186', 'W158', 'W159', 'W160', 'W161',
                     'W162', 'W163', 'W164', 'W165', 'W166', 'W167', 'W172', 'W174', 'W175', 'W176', 'W177', 'W178', 'W179',
                     'W179(1)', 'W181', 'W183(1)', 'W185', 'W185(1)', 'W187', 'W188', 'W189', 'W190', 'RE161', 'RE162', 'RE163',
                     'RE165', 'RE166', 'RE167', 'RE168', 'RE168(1)', 'RE169', 'RE170', 'RE172', 'RE172(1)', 'RE174', 'RE176',
                     'RE177', 'RE178', 'RE179', 'RE180', 'RE181', 'RE182', 'RE182(1)', 'RE183', 'RE183(1)', 'RE184', 'RE184(1)',
                     'RE186', 'RE186(1)', 'RE187', 'RE188', 'RE188(1)', 'RE189', 'RE190', 'RE190(1)', 'RE191', 'RE192',
                     'OS165', 'OS166', 'OS167', 'OS168', 'OS169', 'OS170', 'OS171', 'OS172', 'OS173', 'OS174', 'OS176',
                     'OS179', 'OS180', 'OS181', 'OS181(1)', 'OS182', 'OS183', 'OS183(1)', 'OS185', 'OS186', 'OS189(1)',
                     'OS190(1)', 'OS191', 'OS191(1)', 'OS192(1)', 'OS193', 'OS194', 'OS195', 'OS196', 'IR166', 'IR167',
                     'IR170', 'IR171', 'IR173', 'IR174', 'IR175', 'IR177', 'IR178', 'IR180', 'IR181', 'IR182', 'IR183',
                     'IR184', 'IR185', 'IR186', 'IR186(1)', 'IR187', 'IR188', 'IR189', 'IR190', 'IR190(1)', 'IR190(2)',
                     'IR191(1)', 'IR192', 'IR192(1)', 'IR192(2)', 'IR193(1)', 'IR194', 'IR194(1)', 'IR194(2)', 'IR195',
                     'IR195(1)', 'IR196', 'IR196(1)', 'IR197', 'IR198', 'PT169', 'PT170', 'PT171', 'PT173', 'PT174', 'PT175',
                     'PT177', 'PT178', 'PT179', 'PT180', 'PT181', 'PT182', 'PT183', 'PT183(1)', 'PT184', 'PT184(1)', 'PT185',
                     'PT186', 'PT187', 'PT188', 'PT189', 'PT190', 'PT191', 'PT193', 'PT193(1)', 'PT195(1)', 'PT197', 'PT197(1)',
                     'PT199', 'PT199(1)', 'PT200', 'PT201', 'AU174', 'AU175', 'AU177', 'AU178', 'AU179', 'AU180', 'AU181',
                     'AU182', 'AU183', 'AU184', 'AU185', 'AU186', 'AU187', 'AU188', 'AU189', 'AU189(1)', 'AU190', 'AU191',
                     'AU191(1)', 'AU192', 'AU192(1)', 'AU193', 'AU193(1)', 'AU194', 'AU194(1)', 'AU194(2)', 'AU195', 'AU195(1)',
                     'AU196', 'AU196(1)', 'AU196(2)', 'AU197(1)', 'AU198', 'AU198(1)', 'AU199', 'AU200', 'AU200(1)', 'BI194(2)',
                     'BI195', 'BI195(1)', 'BI196', 'BI197(1)', 'BI198', 'BI198(1)', 'BI199', 'BI199(1)', 'BI200', 'BI200(1)',
                     'BI201', 'BI201(1)', 'BI202', 'BI203', 'BI203(1)', 'BI204', 'BI204(2)', 'BI205', 'BI206', 'BI207', 'BI208',
                     'BI208(1)', 'BI210', 'BI210(1)', 'BI210(2)', 'BI211', 'BI212', 'BI212(1)', 'BI212(2)', 'BI213', 'BI214',
                     'BI215', 'PO192', 'PO193', 'PO193(1)', 'PO194', 'PO195', 'PO195(1)', 'PO196', 'PO197', 'PO197(1)', 'PO198',
                     'PO199', 'PO199(1)', 'PO200', 'PO201', 'PO201(1)', 'PO202', 'PO203', 'PO203(1)', 'PO204', 'PO205',
                     'PO206', 'PO207', 'PO207(1)', 'PO208', 'PO209', 'PO210', 'PO211', 'PO211(1)', 'PO212', 'PO212(1)',
                     'PO212(2)', 'PO213', 'PO214', 'PO215', 'PO216', 'PO217', 'PO218', 'AT194', 'AT196', 'AT197', 'AT198',
                     'AT198(1)', 'AT199', 'AT200', 'AT200(1)', 'AT201', 'AT202', 'AT203', 'AT204', 'AT204(1)', 'AT205', 'AT206',
                     'AT207', 'AT208', 'AT209', 'AT210', 'AT211', 'AT212', 'AT212(1)', 'AT213', 'AT214', 'AT215', 'AT216',
                     'AT217', 'AT218', 'AT219', 'RN198', 'RN199', 'RN199(1)', 'RN200', 'RN201', 'RN201(1)', 'RN202', 'RN203',
                     'RN203(1)', 'RN204', 'RN205', 'RN206', 'RN207', 'RN208', 'RN209', 'RN210', 'RN211', 'RN212', 'RN213', 'RN214',
                     'RN215', 'RN216', 'RN217', 'RN218', 'RN219', 'RN220', 'RN221', 'RN222', 'RN224', 'RN226', 'FR201', 'AU201',
                     'AU202', 'AU203', 'AU204', 'HG178', 'HG179', 'HG180', 'HG181', 'HG182', 'HG183', 'HG184', 'HG185', 'HG185(1)',
                     'HG186', 'HG187', 'HG187(1)', 'HG188', 'HG189', 'HG189(1)', 'HG190', 'HG191', 'HG191(1)', 'HG192', 'HG193',
                     'HG193(1)', 'HG194', 'HG195', 'HG195(1)', 'HG197', 'HG197(1)', 'HG199(1)', 'HG203', 'HG205', 'HG206', 'HG207',
                     'TL179', 'TL179(1)', 'TL183(1)', 'TL184', 'TL185(1)', 'TL186', 'TL186(1)', 'TL187(1)', 'TL188', 'TL189',
                     'TL189(1)', 'TL190', 'TL190(1)', 'TL191(1)', 'TL192', 'TL193', 'TL193(1)', 'TL194', 'TL194(1)', 'TL195',
                     'TL195(1)', 'TL196', 'TL196(1)', 'TL197', 'TL197(1)', 'TL198', 'TL198(1)', 'TL198(2)', 'TL199', 'TL199(1)',
                     'TL200', 'TL200(1)', 'TL201', 'TL201(1)', 'TL202', 'TL204', 'TL206', 'TL206(1)', 'TL207', 'TL207(1)', 'TL208',
                     'TL209', 'TL210', 'PB183', 'PB186', 'PB187', 'PB187(1)', 'PB188', 'PB189', 'PB190', 'PB191', 'PB191(1)', 'PB192',
                     'PB193', 'PB194', 'PB195', 'PB195(1)', 'PB196', 'PB197', 'PB197(1)', 'PB198', 'PB199', 'PB199(1)', 'PB200',
                     'PB201', 'PB201(1)', 'PB202', 'PB202(1)', 'PB203', 'PB203(1)', 'PB203(2)', 'PB204(1)', 'PB205', 'PB205(1)',
                     'PB207(1)', 'PB209', 'PB210', 'PB211', 'PB212', 'PB213', 'PB214', 'BI187', 'BI187(1)', 'BI189', 'BI190', 'BI192',
                     'BI193', 'BI193(1)', 'BI194', 'BI194(1)', 'FR202', 'FR203', 'FR204', 'FR205', 'FR206', 'FR206(1)', 'FR207',
                     'FR208', 'FR209', 'FR210', 'FR211', 'FR212', 'FR213', 'FR214', 'FR214(1)', 'FR215', 'FR216', 'FR217', 'FR218',
                     'FR218(1)', 'FR219', 'FR220', 'FR221', 'FR222', 'FR223', 'FR224', 'FR225', 'FR226', 'FR228', 'RA206', 'RA207',
                     'RA208', 'RA209', 'RA210', 'RA211', 'RA212', 'RA213', 'RA213(1)', 'RA214', 'RA215', 'RA216', 'RA217', 'RA218',
                     'RA219', 'RA220', 'RA221', 'RA222', 'RA223', 'RA224', 'RA225', 'RA226', 'RA227', 'RA228', 'RA229', 'RA230', 'AC209',
                     'AC210', 'AC211', 'AC212', 'AC213', 'AC214', 'AC215', 'AC216', 'AC217', 'AC218', 'AC219', 'AC220', 'AC221', 'AC222',
                     'AC222(1)', 'AC223', 'AC224', 'AC225', 'AC226', 'AC227', 'AC228', 'AC229', 'AC230', 'AC231', 'AC232', 'TH213', 'TH214',
                     'TH215', 'TH216', 'TH217', 'TH218', 'TH219', 'TH220', 'TH221', 'TH222', 'TH223', 'TH224', 'TH225', 'TH226', 'TH227',
                     'TH228', 'TH229', 'TH230', 'TH231', 'TH232', 'TH233', 'TH234', 'TH235', 'TH236', 'PA216', 'PA217', 'PA217(1)', 'PA218',
                     'PA222', 'PA223', 'PA224', 'PA225', 'PA226', 'PA227', 'PA228', 'PA229', 'PA230', 'PA231', 'PA232', 'PA233', 'PA234',
                     'PA234(1)', 'PA235', 'PA236', 'PA237', 'PA238', 'U226', 'U227', 'U228', 'U229', 'U230', 'U231', 'U232', 'U233', 'U234',
                     'U235', 'U235(1)', 'U236', 'U237', 'U238', 'U239', 'U240', 'NP229', 'NP230', 'NP231', 'NP232', 'NP233', 'NP234', 'NP235',
                     'NP236', 'NP236(1)', 'NP237', 'NP238', 'NP239', 'NP240', 'NP240(1)', 'NP241', 'PU232', 'PU233', 'PU234', 'PU235', 'PU236',
                     'PU237', 'PU238', 'PU239', 'PU240', 'PU241', 'PU242', 'PU243', 'PU244', 'PU245', 'PU246', 'AM234', 'AM237', 'AM238', 'AM239',
                     'AM240', 'AM241', 'AM242', 'AM242(1)', 'AM243', 'AM244', 'AM244(1)', 'AM245', 'AM246', 'AM246(1)', 'AM247', 'CM238',
                     'CM239', 'CM240', 'CM241', 'CM242', 'CM243', 'CM244', 'CM245', 'CM246', 'CM247', 'CM248', 'CM249', 'CM250', 'CM251', 'BK242',
                     'BK243', 'BK244', 'BK245', 'BK246', 'BK247', 'BK248(1)', 'BK249', 'BK250', 'BK251', 'CF239', 'CF240', 'CF241', 'CF242',
                     'CF243', 'CF244', 'CF245', 'CF246', 'CF247', 'CF248', 'CF249', 'CF250', 'CF251', 'CF252', 'CF253', 'CF254', 'CF255', 'H1',
                     'H2', 'HE3', 'HE4', 'LI6', 'LI7', 'BE9', 'B10', 'B11', 'C12', 'C13', 'N14', 'N15', 'O16', 'O17', 'O18', 'F19', 'NE20',
                     'NE21', 'NE22', 'NA23', 'MG24', 'MG25', 'MG26', 'AL27', 'SI28', 'SI29', 'SI30', 'P31', 'S32', 'S33', 'S34', 'S36', 'CL35',
                     'CL37', 'AR36', 'AR38', 'AR40', 'K39', 'K41', 'CA40', 'CA42', 'CA43', 'CA44', 'CA46', 'CA48', 'SC45', 'TI46', 'TI47', 'TI48',
                     'TI49', 'TI50', 'V51', 'CR50', 'CR52', 'CR53', 'CR54', 'MN55', 'FE54', 'FE56', 'FE57', 'FE58', 'CO59', 'NI58', 'NI60', 'NI61',
                     'NI62', 'NI64', 'CU63', 'CU65', 'ZN64', 'ZN66', 'ZN67', 'ZN68', 'ZN70', 'GA69', 'GA71', 'GE70', 'GE72', 'GE73', 'GE74', 'GE76',
                     'AS75', 'SE74', 'SE76', 'SE77', 'SE78', 'SE80', 'BR79', 'BR81', 'KR78', 'KR80', 'KR82', 'KR83', 'KR84', 'KR86', 'RB85', 'SR84',
                     'SR86', 'SR87', 'SR88', 'Y89', 'ZR90', 'ZR91', 'ZR92', 'ZR94', 'ZR96', 'NB93', 'MO92', 'MO94', 'MO95', 'MO96', 'MO97', 'MO98',
                     'MO100', 'RU96', 'RU98', 'RU99', 'RU100', 'RU101', 'RU102', 'RU104', 'RH103', 'PD102', 'PD104', 'PD105', 'PD106', 'PD108',
                     'PD110', 'AG107', 'AG109', 'CD106', 'CD108', 'CD110', 'CD111', 'CD112', 'CD114', 'CD116', 'IN113', 'SN112', 'SN114', 'SN115',
                     'SN116', 'SN117', 'SN118', 'SN119', 'SN120', 'SN122', 'SN124', 'SB121', 'SB123', 'TE120', 'TE122', 'TE124', 'TE125', 'TE126',
                     'TE128', 'TE130', 'I127', 'XE124', 'XE126', 'XE128', 'XE129', 'XE130', 'XE131', 'XE132', 'XE134', 'XE136', 'CS133', 'BA130',
                     'BA132', 'BA134', 'BA135', 'BA136', 'BA137', 'BA138', 'LA139', 'CE136', 'CE138', 'CE140', 'PR141', 'ND142', 'ND143', 'ND145',
                     'ND146', 'ND148', 'ND150', 'SM144', 'SM150', 'SM152', 'SM154', 'EU151', 'EU153', 'GD154', 'GD155', 'GD156', 'GD157', 'GD158',
                     'GD160', 'TB159', 'DY156', 'DY158', 'DY160', 'DY161', 'DY162', 'DY163', 'DY164', 'HO165', 'ER162', 'ER164', 'ER166', 'ER167',
                     'ER168', 'ER170', 'TM169', 'YB168', 'YB170', 'YB171', 'YB172', 'YB173', 'YB174', 'YB176', 'LU175', 'HF176', 'HF177', 'HF178',
                     'HF179', 'HF180', 'TA180(1)', 'TA181', 'W180', 'W182', 'W183', 'W184', 'W186', 'RE185', 'OS184', 'OS187', 'OS188', 'OS189',
                     'OS190', 'OS192', 'IR191', 'IR193', 'PT192', 'PT194', 'PT195', 'PT196', 'PT198', 'AU197', 'HG196', 'HG198', 'HG199', 'HG200',
                     'HG201', 'HG202', 'HG204', 'TL203', 'TL205', 'PB204', 'PB206', 'PB207', 'PB208', 'BI209']
    output = np.vstack(isotope_array)
    for recipe, composition in comp_dict.items():
        comp = [0] * len(isotope_array)
        comp[0] = recipe
        for iso, val in composition.items():
            if iso in isotope_array:
                indx = isotope_array.index(iso)
                comp[indx] = val
        output = np.hstack((output, np.vstack(comp)))

    with open(outputfile, 'w') as f:
        wr = csv.writer(f)
        for row in output:
            wr.writerow(row)


def find_between(string, first, last ):
    start = string.index(first) + len(first)
    end = string.index(last, start)
    return string[start:end]


comp_dict = read_cyclus('test.xml')
write_orion(comp_dict, 'output.csv')